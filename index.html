<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Türkiye'den Kıbrıs'a Sipariş Getirme Hizmeti | Getir Kıbrıs</title>
<meta name="description" content="Trendyol, Hepsiburada ve diğer Türkiye sitelerinden Kıbrıs'a kolay ve hızlı ürün getiriyoruz. Hemen hesaplayın ve sipariş verin.">
<link rel="canonical" href="https://getirkibris.com" />
<link rel="icon" href="/favicon.ico?v=1" type="image/x-icon">
<script src="https://cdn.tailwindcss.com/3.4.16"></script>
<script>
    tailwind.config = {
        theme: {
            extend: {
                colors: { primary: '#5d3ebc', secondary: '#ffd300' },
                borderRadius: { 'none': '0px', 'sm': '4px', DEFAULT: '8px', 'md': '12px', 'lg': '16px', 'xl': '20px', '2xl': '24px', '3xl': '32px', 'full': '9999px', 'button': '8px' }
            }
        }
    }
</script>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.6.0/remixicon.min.css">
<style>
    /* :where([class^="ri-"])::before { content: "\f3c2"; } */ /* Bu kural ikonları bozuyordu, kaldırdım */
    body { font-family: 'Inter', sans-serif; background-color: #f9f9f9; }
    .copy-btn:active { transform: scale(0.95); }
</style>
</head>
<body class="bg-gray-50">
<div class="w-full max-w-screen-lg mx-auto relative min-h-screen pb-16">

    <header class="fixed top-0 w-full bg-white shadow-sm z-50 px-4 py-3 flex items-center">
        <div class="flex-1"></div>
        <div class="flex flex-col items-center">
            <a href="index.html"><img src="logom.png" alt="Getir Kıbrıs" class="h-12"></a>
        </div>
        <div class="flex-1 flex justify-end">
            <div id="auth-button" class="w-8 h-8 flex items-center justify-center">
                <button id="login-btn" class="text-primary font-medium cursor-pointer"><i class="ri-google-fill ri-lg"></i></button>
                <div id="profile-container" class="hidden"><img id="profile-img" src="" alt="Profil" class="w-8 h-8 rounded-full cursor-pointer"></div>
            </div>
        </div>
    </header>

    <main class="pt-20 pb-20">
        <div class="relative w-full h-64 sm:h-80 lg:h-[450px] overflow-hidden mb-6">
            <video class="w-full h-full object-cover" autoplay loop muted playsinline poster="https://readdy.ai/api/search-image?query=online%20shopping%20and%20delivery%20service%2C%20modern%20lifestyle%2C%20soft%20lighting%2C%20clean%20background%2C%20banner%20image&width=800&height=400&seq=1&orientation=landscape">
                <source src="https://public.readdy.ai/assets/sample.mp4" type="video/mp4">
            </video>
            <div class="absolute inset-0 bg-gradient-to-t from-primary/70 to-transparent pointer-events-none"></div>
        </div>

        <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 px-4 mb-8">
            <button id="calculate-btn" class="bg-white shadow-md p-4 rounded-button flex flex-col items-center justify-center h-32 cursor-pointer border hover:border-primary/20 transition-all">
                <div class="w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center mb-2"><i class="ri-calculator-line ri-xl text-primary"></i></div>
                <span class="text-sm font-medium">Hesapla</span>
            </button>
            <a href="sepet.html" id="my-orders-btn" class="bg-white shadow-md p-4 rounded-button flex flex-col items-center justify-center h-32 cursor-pointer border hover:border-primary/20 transition-all">
                <div class="w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center mb-2"><i class="ri-file-list-3-line ri-xl text-primary"></i></div>
                <span class="text-sm font-medium">Siparişlerim</span>
            </a>
            <button id="order-now-btn" class="bg-white shadow-md p-4 rounded-button flex flex-col items-center justify-center h-32 cursor-pointer border hover:border-primary/20 transition-all">
                <div class="w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center mb-2"><i class="ri-shopping-bag-line ri-xl text-primary"></i></div>
                <span class="text-sm font-medium">Sipariş Ver</span>
            </button>
        </div>

        <div id="calculator-section" class="bg-white rounded-lg shadow-md mx-4 p-6 mb-8 hidden">
            <h3 class="text-lg font-semibold mb-4 text-primary">Ürün Maliyeti Hesapla</h3>
            <form id="calculator-form" class="space-y-4">
                <div>
                    <label for="order-method" class="block text-sm font-medium text-gray-700 mb-1">Sipariş Yöntemi<span class="text-red-500">*</span></label>
                    <div class="relative"><i class="ri-shopping-bag-line ri-lg absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i><select id="order-method" required class="w-full pl-10 pr-10 py-2 border rounded-button focus:outline-none focus:border-primary"><option value="" disabled selected>Sipariş yöntemi seçin</option><option value="self">Ürünü ben alacağım, sadece kargo</option><option value="service">Ürünü benim için siz alın</option></select><i class="ri-arrow-down-s-line ri-lg absolute right-3 top-1/2 -translate-y-1/2 text-gray-400"></i></div>
                </div>
                <div>
                    <label for="product-link" class="block text-sm font-medium text-gray-700 mb-1">Ürün Linki<span class="text-red-500">*</span></label>
                    <div class="relative"><i class="ri-link ri-lg absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i><input type="url" id="product-link" required class="w-full pl-10 pr-4 py-2 border rounded-button" placeholder="https://www.example.com/urun"></div>
                </div>
                <div>
                    <label for="product-price" class="block text-sm font-medium text-gray-700 mb-1">Ürün Fiyatı (₺)<span class="text-red-500">*</span></label>
                    <div class="relative"><i class="ri-money-lira-circle-line ri-lg absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i><input type="number" id="product-price" required class="w-full pl-10 pr-4 py-2 border rounded-button" placeholder="0.00" step="any" min="0.01"></div>
                </div>
                <div>
                    <label for="product-category" class="block text-sm font-medium text-gray-700 mb-1">Kategori<span class="text-red-500">*</span></label>
                    <div class="relative"><i class="ri-price-tag-3-line ri-lg absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i><select id="product-category" required class="w-full pl-10 pr-10 py-2 border rounded-button appearance-none"><option value="" disabled selected>Kategori seçin</option><option value="furniture">Mobilya</option><option value="electronics">Elektronik</option><option value="clothing">Giyim</option><option value="cosmetics">Kozmetik</option><option value="stationery">Kırtasiye</option></select><i class="ri-arrow-down-s-line ri-lg absolute right-3 top-1/2 -translate-y-1/2 text-gray-400"></i></div>
                </div>
                <div>
                    <span class="block text-sm font-medium text-gray-700 mb-2">Teslimat Tipi<span class="text-red-500">*</span></span>
                    <div class="flex space-x-4"><label class="flex items-center cursor-pointer"><input type="radio" name="delivery-type" value="warehouse" class="sr-only" checked required><div class="w-5 h-5 border border-gray-300 rounded-full flex items-center justify-center mr-2 delivery-radio"><div class="w-3 h-3 bg-primary rounded-full"></div></div><span class="text-sm">Depodan teslim</span></label><label class="flex items-center cursor-pointer"><input type="radio" name="delivery-type" value="home" class="sr-only" required><div class="w-5 h-5 border border-gray-300 rounded-full flex items-center justify-center mr-2 delivery-radio"><div class="w-3 h-3 bg-primary rounded-full hidden"></div></div><span class="text-sm">Eve teslim</span></label></div>
                </div>
                <div id="city-selection" class="hidden">
                    <label for="city" class="block text-sm font-medium text-gray-700 mb-1">Şehir<span class="text-red-500">*</span></label>
                    <div class="relative"><i class="ri-map-pin-line ri-lg absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i><select id="city" class="w-full pl-10 pr-10 py-2 border rounded-button"><option value="" disabled selected>Şehir seçin</option><option value="lefkosa">Lefkoşa</option><option value="girne">Girne</option><option value="magusa">Gazimağusa</option><option value="guzelyurt">Güzelyurt</option><option value="iskele">İskele</option></select><i class="ri-arrow-down-s-line ri-lg absolute right-3 top-1/2 -translate-y-1/2 text-gray-400"></i></div>
                </div>
                <button type="submit" class="w-full bg-primary text-white py-3 rounded-button font-medium hover:bg-primary/90 disabled:opacity-50" disabled>Ayarlar Yükleniyor...</button>
            </form>
            <div id="calculation-result" class="mt-6 p-4 bg-gray-50 rounded-lg hidden"></div>
        </div>
        </main>
</div>

<div id="login-modal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 hidden"></div>
<div id="auth-required-modal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 hidden"></div>
<div id="toast" class="fixed bottom-20 left-1/2 -translate-x-1/2 bg-gray-800 text-white px-4 py-2 rounded-lg opacity-0"><span id="toast-message"></span></div>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<script>
    // GÜNCELLENMİŞ VE STABİL SCRIPT
    document.addEventListener('DOMContentLoaded', function () {
        
        // --- Firebase Kurulumu ---
        const firebaseConfig = {
            apiKey: "AIzaSyDYkzZzNXB22U4oEXxOoPh-puwuE8kz0g4",
            authDomain: "pufemo-com.firebaseapp.com",
            projectId: "pufemo-com",
            storageBucket: "pufemo-com.appspot.com",
            messagingSenderId: "983352837227",
            appId: "1:983352837227:web:defaa8dae215776e2e1d2e",
            measurementId: "G-RH8XHC7P91"
        };
        if (!firebase.apps.length) {
            firebase.initializeApp(firebaseConfig);
        }
        const db = firebase.firestore();
        const auth = firebase.auth();

        // --- Global Değişkenler ---
        let pricingSettings = null; // Fiyat ayarlarını burada saklayacağız

        // --- DOM Elementleri ---
        const calculateBtn = document.getElementById('calculate-btn');
        const orderNowBtn = document.getElementById('order-now-btn');
        const calculatorSection = document.getElementById('calculator-section');
        const calculatorForm = document.getElementById('calculator-form');
        const submitButton = calculatorForm.querySelector('button[type="submit"]');
        const citySelection = document.getElementById('city-selection');
        const deliveryRadios = document.querySelectorAll('input[name="delivery-type"]');
        
        // --- Fonksiyonlar ---
        const showToast = (message) => {
            const toast = document.getElementById('toast');
            toast.querySelector('span').textContent = message;
            toast.classList.add('opacity-100');
            setTimeout(() => { toast.classList.remove('opacity-100'); }, 3000);
        };

        const toggleCalculator = () => {
            calculatorSection.classList.toggle('hidden');
            if(!calculatorSection.classList.contains('hidden')){
                calculatorSection.scrollIntoView({ behavior: 'smooth' });
            }
        }

        // --- Event Listeners ---
        calculateBtn.addEventListener('click', toggleCalculator);
        orderNowBtn.addEventListener('click', toggleCalculator);

        deliveryRadios.forEach(radio => {
            radio.addEventListener('change', function () {
                document.querySelectorAll('.delivery-radio div').forEach(dot => dot.classList.add('hidden'));
                this.parentElement.querySelector('.delivery-radio div').classList.remove('hidden');
                citySelection.classList.toggle('hidden', this.value !== 'home');
            });
        });

        calculatorForm.addEventListener('submit', function (e) {
            e.preventDefault();
            if (!pricingSettings) {
                showToast("Fiyat ayarları yüklenemedi, lütfen tekrar deneyin.");
                return;
            }
            
            // Form verilerini al
            const orderMethod = document.getElementById('order-method').value;
            const price = parseFloat(document.getElementById('product-price').value);
            const category = document.getElementById('product-category').value;
            const deliveryType = document.querySelector('input[name="delivery-type"]:checked').value;
            const city = document.getElementById('city').value;

            // Gerekli alanların kontrolü
            if (!orderMethod || !price || !category || (deliveryType === 'home' && !city)) {
                showToast("Lütfen tüm zorunlu alanları doldurun.");
                return;
            }

            // Hesaplama
            const categoryFee = price * (pricingSettings.categoryRates[category] || 0);
            let deliveryFee = 0;
            if (deliveryType === 'home') {
                deliveryFee = pricingSettings.cityFees[city] || 0;
            }
            
            let total;
            let priceText;

            if (orderMethod === 'self') { // Sadece kargo hizmeti
                total = categoryFee + deliveryFee;
                priceText = `${price.toFixed(2)} ₺ <span class="text-xs text-gray-500">(ürün bedeli hariç)</span>`;
            } else { // "Benim için al" hizmeti
                total = price + categoryFee + deliveryFee;
                priceText = `${price.toFixed(2)} ₺`;
            }

            // Sonuçları göster
            const calculationResult = document.getElementById('calculation-result');
            calculationResult.innerHTML = `
                <h4 class="font-medium text-gray-800 mb-2">Hesaplama Sonucu</h4>
                <div class="space-y-2 text-sm">
                    <div class="flex justify-between"><span>Ürün Fiyatı:</span><span>${priceText}</span></div>
                    <div class="flex justify-between"><span>Kategori Ücreti:</span><span>${categoryFee.toFixed(2)} ₺</span></div>
                    ${deliveryType === 'home' ? `<div class="flex justify-between"><span>Teslimat Ücreti:</span><span>${deliveryFee.toFixed(2)} ₺</span></div>` : ''}
                    <div class="flex justify-between font-bold text-primary pt-2 border-t"><span>Toplam Ödenecek:</span><span>${total.toFixed(2)} ₺</span></div>
                </div>
            `;
            calculationResult.classList.remove('hidden');
            // Not: Bu basit hesap makinesi, şimdilik sipariş oluşturmuyor, sadece gösterim yapıyor.
            // Diğer istediğiniz özellikler (sepete ekleme vb.) bu temel üzerine inşa edilecek.
        });
        
        // --- Sayfa Yüklenince Başlatılacak İşlemler ---
        
        // 1. Fiyat ayarlarını veritabanından çek.
        db.collection('settings').doc('pricing').get()
            .then(doc => {
                if (doc.exists) {
                    pricingSettings = doc.data();
                    submitButton.disabled = false;
                    submitButton.textContent = 'Hesapla';
                } else {
                    submitButton.textContent = 'Sistem Kapalı';
                    showToast('Fiyat ayarları bulunamadı. Yönetici ile iletişime geçin.');
                }
            })
            .catch(err => {
                console.error("Fiyat ayarları çekilirken hata:", err);
                submitButton.textContent = 'Hata Oluştu';
                showToast('Ayarlar yüklenirken bir hata oluştu.');
            });

        // Auth script'i (giriş/çıkış UI) olduğu gibi kalabilir, o genellikle sorunsuz çalışıyordu.
        const auth = firebase.auth();
        const loginBtn = document.getElementById('login-btn');
        const profileContainer = document.getElementById('profile-container');
        const profileImg = document.getElementById('profile-img');

        auth.onAuthStateChanged(function (user) {
            if (user) {
                loginBtn.classList.add('hidden');
                profileContainer.classList.remove('hidden');
                profileImg.src = user.photoURL || `https://ui-avatars.com/api/?name=${user.email}&background=5d3ebc&color=fff`;
            } else {
                loginBtn.classList.remove('hidden');
                profileContainer.classList.add('hidden');
            }
        });
    });
</script>

</body>
</html>
