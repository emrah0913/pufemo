<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>√úr√ºn Detayƒ± - Pufemo Relax Koltuk</title>
    
    <!-- Google Fonts ve Font Awesome (index.html'deki gibi) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">

    <style>
        /* --- GENEL STƒ∞LLER (index.html'den alƒ±ndƒ±) --- */
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #e74c3c;
            --background-color: #ecf0f1;
            --text-color: #34495e;
            --light-text-color: #ffffff;
            --card-bg-color: #ffffff;
            --border-radius: 8px;
            --box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Poppins', sans-serif; }
        body { background-color: var(--background-color); color: var(--text-color); line-height: 1.6; }
        .container { max-width: 1200px; margin: 0 auto; padding: 0 20px; }
        a { text-decoration: none; color: inherit; }

        /* --- HEADER, NAV, FOOTER (index.html'den alƒ±ndƒ±) --- */
        .main-header { background-color: var(--card-bg-color); box-shadow: var(--box-shadow); padding: 1rem 0; position: sticky; top: 0; z-index: 1000; }
        .main-header .container { display: flex; justify-content: space-between; align-items: center; }
        .logo { font-size: 1.8rem; font-weight: 700; color: var(--primary-color); }
        .logo i { color: var(--secondary-color); }
        .header-controls { display: flex; align-items: center; gap: 1.5rem; }
        .control-select { background-color: #f8f9fa; border: 1px solid #ddd; padding: 5px; border-radius: 5px; font-size: 1rem; cursor: pointer; }
        .cart-icon { font-size: 1.5rem; position: relative; }
        .cart-badge { position: absolute; top: -5px; right: -10px; background-color: var(--secondary-color); color: var(--light-text-color); border-radius: 50%; padding: 2px 6px; font-size: 0.7rem; font-weight: 600; }
        .category-nav { background-color: var(--primary-color); padding: 0.8rem 0; }
        .category-nav ul { list-style: none; display: flex; justify-content: center; gap: 2.5rem; flex-wrap: wrap; }
        .category-nav a { color: var(--light-text-color); font-weight: 500; padding: 5px 10px; border-radius: 5px; transition: background-color 0.3s ease; }
        .category-nav a:hover { background-color: rgba(255,255,255,0.1); }
        .main-footer { background-color: var(--primary-color); color: var(--light-text-color); padding: 3rem 0; margin-top: 3rem; }
        .footer-content { display: flex; justify-content: space-around; flex-wrap: wrap; gap: 2rem; text-align: center; }
        .footer-section { flex: 1; min-width: 200px; }
        .footer-section h4 { font-size: 1.2rem; margin-bottom: 1rem; border-bottom: 2px solid var(--secondary-color); padding-bottom: 0.5rem; display: inline-block; }
        .footer-section ul { list-style: none; }
        .footer-section a:hover { color: var(--secondary-color); }
        .footer-bottom { text-align: center; margin-top: 3rem; padding-top: 1.5rem; border-top: 1px solid rgba(255,255,255,0.2); font-size: 0.9rem; }
        
        /* --- √úR√úN DETAY SAYFASI STƒ∞LLERƒ∞ --- */
        main { padding: 3rem 0; }
        .product-detail-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 2rem;
            background-color: var(--card-bg-color);
            padding: 2rem;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
        }

        @media (min-width: 768px) {
            .product-detail-container {
                grid-template-columns: 1fr 1fr;
                gap: 3rem;
            }
        }

        /* √úr√ºn Galerisi */
        .product-gallery {
            display: flex;
            flex-direction: column;
        }

        .main-image-container img {
            width: 100%;
            height: auto;
            border-radius: var(--border-radius);
            margin-bottom: 1rem;
            border: 1px solid #eee;
        }

        .thumbnail-list {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .thumbnail-list img {
            width: 80px;
            height: 80px;
            object-fit: cover;
            border-radius: 5px;
            cursor: pointer;
            border: 2px solid transparent;
            transition: border-color 0.3s ease;
        }

        .thumbnail-list img.active {
            border-color: var(--secondary-color);
        }

        /* √úr√ºn Bilgileri */
        .product-info h1 {
            font-size: 2.5rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--primary-color);
        }

        .product-price {
            font-size: 2rem;
            font-weight: 700;
            color: var(--secondary-color);
            margin-bottom: 1.5rem;
        }
        
        .product-description {
            margin-bottom: 2rem;
        }

        /* Varyant Se√ßenekleri */
        .variant-group {
            margin-bottom: 1.5rem;
        }

        .variant-group h3 {
            font-size: 1.1rem;
            font-weight: 500;
            margin-bottom: 0.8rem;
        }

        .variant-options {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .variant-btn {
            padding: 8px 15px;
            border: 1px solid #ccc;
            border-radius: 5px;
            background-color: #fff;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .variant-btn:hover {
            background-color: #f0f0f0;
            border-color: #aaa;
        }

        .variant-btn.active {
            background-color: var(--primary-color);
            color: var(--light-text-color);
            border-color: var(--primary-color);
        }

        /* Satƒ±n Alma Butonlarƒ± */
        .purchase-actions {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-top: 2rem;
        }
        
        .quantity-selector {
            font-size: 1rem;
            padding: 12px;
            width: 80px;
            border: 1px solid #ccc;
            border-radius: 5px;
            text-align: center;
        }
        
        .btn-add-to-cart {
            flex-grow: 1;
            background-color: var(--secondary-color);
            color: var(--light-text-color);
            padding: 12px 25px;
            border: none;
            border-radius: 5px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s ease;
            text-align: center;
        }

        .btn-add-to-cart:hover {
            background-color: #c0392b;
        }
        
        .btn-add-to-cart i {
            margin-right: 10px;
        }

    </style>
</head>
<body>

    <!-- Header, Nav, Footer aynƒ± kalacak -->
    <header class="main-header">
        <div class="container">
             <a href="index.html" class="logo"><i class="fa-solid fa-couch"></i> PUFEMO</a>
             <div class="header-controls">
                <select id="language-selector" class="control-select">
                    <option value="tr">üáπüá∑ T√ºrk√ße</option>
                    <option value="en">üá¨üáß English</option>
                    <option value="el">üá¨üá∑ ŒïŒªŒªŒ∑ŒΩŒπŒ∫Œ¨</option>
                    <option value="ru">üá∑üá∫ –†—É—Å—Å–∫–∏–π</option>
                </select>
                <select id="currency-selector" class="control-select">
                    <option value="TRY">‚Ç∫ TRY</option>
                    <option value="USD">$ USD</option>
                    <option value="EUR">‚Ç¨ EUR</option>
                    <option value="GBP">¬£ GBP</option>
                </select>
                <a href="cart.html" class="cart-icon"><i class="fa-solid fa-cart-shopping"></i><span class="cart-badge">0</span></a>
             </div>
        </div>
    </header>
    <nav class="category-nav">
        <div class="container">
            <ul>
                <li><a href="index.html#koltuklar" data-lang-key="nav_koltuklar">Koltuklar</a></li>
                <li><a href="index.html#puflar" data-lang-key="nav_puflar">Puflar</a></li>
                <li><a href="index.html#berjerler" data-lang-key="nav_berjerler">Berjerler</a></li>
                <li><a href="index.html#kose-takimlari" data-lang-key="nav_kose_takimlari">K√∂≈üe Takƒ±mlarƒ±</a></li>
                <li><a href="index.html#aksesuarlar" data-lang-key="nav_aksesuarlar">Aksesuarlar</a></li>
            </ul>
        </div>
    </nav>

    <!-- ======================= √úR√úN DETAY ANA ƒ∞√áERƒ∞K ======================= -->
    <main class="container">
        <div class="product-detail-container">
            <!-- √úr√ºn Galerisi -->
            <section class="product-gallery">
                <div class="main-image-container">
                    <img id="main-product-image" src="" alt="Pufemo Relax Koltuk">
                </div>
                <div id="thumbnail-list" class="thumbnail-list">
                    <!-- Thumbnails will be dynamically generated here -->
                </div>
            </section>

            <!-- √úr√ºn Bilgileri -->
            <section class="product-info">
                <h1 data-lang-key="product_name_relax">Pufemo Relax Koltuk</h1>
                <div id="product-price" class="product-price"></div>
                <p class="product-description" data-lang-key="product_long_desc_relax">
                    G√ºn√ºn yorgunluƒüunu atmanƒ±z i√ßin √∂zel olarak tasarlanan Pufemo Relax Koltuk, modern √ßizgileri ve √ºst√ºn konforuyla ya≈üam alanlarƒ±nƒ±za deƒüer katƒ±yor. Geni≈ü oturma alanƒ± ve yumu≈üak dokulu kuma≈üƒ± ile keyifli anlar sizi bekliyor.
                </p>

                <!-- Renk Se√ßimi -->
                <div class="variant-group">
                    <h3 data-lang-key="variant_color">Renk</h3>
                    <div id="color-options" class="variant-options">
                        <!-- Color buttons will be dynamically generated here -->
                    </div>
                </div>

                <!-- √ñl√ß√º Se√ßimi -->
                <div class="variant-group">
                    <h3 data-lang-key="variant_size">√ñl√ß√º</h3>
                    <div id="size-options" class="variant-options">
                        <button class="variant-btn active">180x90 cm</button>
                        <button class="variant-btn">220x90 cm</button>
                    </div>
                </div>

                <!-- Kuma≈ü Se√ßimi -->
                <div class="variant-group">
                    <h3 data-lang-key="variant_fabric">Kuma≈ü</h3>
                    <div id="fabric-options" class="variant-options">
                        <button class="variant-btn active" data-lang-key="fabric_velvet">Kadife</button>
                        <button class="variant-btn" data-lang-key="fabric_linen">Keten</button>
                    </div>
                </div>

                <!-- Satƒ±n Alma Alanƒ± -->
                <div class="purchase-actions">
                    <input type="number" class="quantity-selector" value="1" min="1">
                    <button class="btn-add-to-cart">
                        <i class="fa-solid fa-cart-plus"></i>
                        <span data-lang-key="add_to_cart">Sepete Ekle</span>
                    </button>
                </div>
            </section>
        </div>
    </main>

    <footer class="main-footer">
        <div class="container">
            <!-- Footer content remains the same -->
             <div class="footer-content">
                <div class="footer-section">
                    <h4>PUFEMO</h4>
                    <p data-lang-key="footer_about">Hayallerinizdeki konforu ve estetiƒüi evinize ta≈üƒ±yoruz.</p>
                </div>
                <div class="footer-section">
                    <h4 data-lang-key="footer_links_title">Hƒ±zlƒ± Baƒülantƒ±lar</h4>
                    <ul>
                        <li><a href="#" data-lang-key="footer_link_about">Hakkƒ±mƒ±zda</a></li>
                        <li><a href="#" data-lang-key="footer_link_contact">ƒ∞leti≈üim</a></li>
                        <li><a href="#" data-lang-key="footer_link_privacy">Gizlilik Politikasƒ±</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4 data-lang-key="footer_social_title">Bizi Takip Edin</h4>
                    <ul>
                        <li><a href="#">Facebook</a></li>
                        <li><a href="#">Instagram</a></li>
                        <li><a href="#">Pinterest</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                 &copy; 2025 PUFEMO.COM | <span data-lang-key="footer_rights">T√ºm Haklarƒ± Saklƒ±dƒ±r.</span>
            </div>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // --- DATA (Bu veriler ileride veritabanƒ±ndan gelecek) ---
            const productData = {
                basePrice: 12499,
                variants: [
                    {
                        color: "Gri",
                        colorKey: "color_grey",
                        images: [
                            'https://placehold.co/600x600/bdc3c7/ffffff?text=Gri+-+√ñn',
                            'https://placehold.co/600x600/bdc3c7/ffffff?text=Gri+-+Yan',
                            'https://placehold.co/600x600/bdc3c7/ffffff?text=Gri+-+Detay'
                        ]
                    },
                    {
                        color: "Hardal",
                        colorKey: "color_mustard",
                        images: [
                            'https://placehold.co/600x600/f1c40f/ffffff?text=Hardal+-+√ñn',
                            'https://placehold.co/600x600/f1c40f/ffffff?text=Hardal+-+Kuma≈ü'
                        ]
                    },
                    {
                        color: "Krem",
                        colorKey: "color_cream",
                        images: [
                            'https://placehold.co/600x600/ecf0f1/34495e?text=Krem+-+√ñn',
                            'https://placehold.co/600x600/ecf0f1/34495e?text=Krem+-+Yan',
                            'https://placehold.co/600x600/ecf0f1/34495e?text=Krem+-+Yastƒ±k',
                            'https://placehold.co/600x600/ecf0f1/34495e?text=Krem+-+Detay'
                        ]
                    }
                ]
            };

            const translations = {
                tr: {
                    nav_koltuklar: "Koltuklar", nav_puflar: "Puflar", nav_berjerler: "Berjerler", nav_kose_takimlari: "K√∂≈üe Takƒ±mlarƒ±", nav_aksesuarlar: "Aksesuarlar",
                    product_name_relax: "Pufemo Relax Koltuk",
                    product_long_desc_relax: "G√ºn√ºn yorgunluƒüunu atmanƒ±z i√ßin √∂zel olarak tasarlanan Pufemo Relax Koltuk, modern √ßizgileri ve √ºst√ºn konforuyla ya≈üam alanlarƒ±nƒ±za deƒüer katƒ±yor. Geni≈ü oturma alanƒ± ve yumu≈üak dokulu kuma≈üƒ± ile keyifli anlar sizi bekliyor.",
                    variant_color: "Renk", variant_size: "√ñl√ß√º", variant_fabric: "Kuma≈ü",
                    color_grey: "Gri", color_mustard: "Hardal", color_cream: "Krem",
                    fabric_velvet: "Kadife", fabric_linen: "Keten",
                    add_to_cart: "Sepete Ekle",
                    footer_about: "Hayallerinizdeki konforu ve estetiƒüi evinize ta≈üƒ±yoruz.",
                    footer_links_title: "Hƒ±zlƒ± Baƒülantƒ±lar", footer_link_about: "Hakkƒ±mƒ±zda", footer_link_contact: "ƒ∞leti≈üim", footer_link_privacy: "Gizlilik Politikasƒ±",
                    footer_social_title: "Bizi Takip Edin", footer_rights: "T√ºm Haklarƒ± Saklƒ±dƒ±r."
                },
                en: {
                    nav_koltuklar: "Sofas", nav_puflar: "Poufs", nav_berjerler: "Armchairs", nav_kose_takimlari: "Sectionals", nav_aksesuarlar: "Accessories",
                    product_name_relax: "Pufemo Relax Sofa",
                    product_long_desc_relax: "Designed for you to relieve the tiredness of the day, Pufemo Relax Sofa adds value to your living spaces with its modern lines and superior comfort.",
                    variant_color: "Color", variant_size: "Size", variant_fabric: "Fabric",
                    color_grey: "Gray", color_mustard: "Mustard", color_cream: "Cream",
                    fabric_velvet: "Velvet", fabric_linen: "Linen",
                    add_to_cart: "Add to Cart",
                    footer_about: "We bring the comfort and aesthetics of your dreams to your home.",
                    footer_links_title: "Quick Links", footer_link_about: "About Us", footer_link_contact: "Contact", footer_link_privacy: "Privacy Policy",
                    footer_social_title: "Follow Us", footer_rights: "All Rights Reserved."
                },
                 el: {
                    nav_koltuklar: "ŒöŒ±ŒΩŒ±œÄŒ≠Œ¥ŒµœÇ", nav_puflar: "Œ†ŒøœÖœÜ", nav_berjerler: "Œ†ŒøŒªœÖŒ∏œÅœåŒΩŒµœÇ", nav_kose_takimlari: "ŒìœâŒΩŒπŒ±Œ∫ŒøŒØ ŒöŒ±ŒΩŒ±œÄŒ≠Œ¥ŒµœÇ", nav_aksesuarlar: "ŒëŒæŒµœÉŒøœÖŒ¨œÅ",
                    product_name_relax: "ŒöŒ±ŒΩŒ±œÄŒ≠œÇ Pufemo Relax",
                    product_long_desc_relax: "Œ£œáŒµŒ¥ŒπŒ±œÉŒºŒ≠ŒΩŒøœÇ Œ≥ŒπŒ± ŒΩŒ± Œ±ŒΩŒ±Œ∫ŒøœÖœÜŒØŒ∂ŒµŒπ Œ±œÄœå œÑŒ∑ŒΩ Œ∫ŒøœçœÅŒ±œÉŒ∑ œÑŒ∑œÇ Œ∑ŒºŒ≠œÅŒ±œÇ, Œø Œ∫Œ±ŒΩŒ±œÄŒ≠œÇ Pufemo Relax œÄœÅŒøœÉŒ∏Œ≠œÑŒµŒπ Œ±ŒæŒØŒ± œÉœÑŒøœÖœÇ œáœéœÅŒøœÖœÇ œÉŒ±œÇ.",
                    variant_color: "ŒßœÅœéŒºŒ±", variant_size: "ŒúŒ≠Œ≥ŒµŒ∏ŒøœÇ", variant_fabric: "ŒéœÜŒ±œÉŒºŒ±",
                    color_grey: "ŒìŒ∫œÅŒπ", color_mustard: "ŒúŒøœÖœÉœÑŒ±œÅŒ¥ŒØ", color_cream: "ŒöœÅŒµŒº",
                    fabric_velvet: "ŒíŒµŒªŒøœçŒ¥Œø", fabric_linen: "ŒõŒπŒΩœå",
                    add_to_cart: "Œ†œÅŒøœÉŒ∏ŒÆŒ∫Œ∑ œÉœÑŒø Œ∫Œ±ŒªŒ¨Œ∏Œπ",
                    footer_about: "Œ¶Œ≠œÅŒΩŒøœÖŒºŒµ œÑŒ∑ŒΩ Œ¨ŒΩŒµœÉŒ∑ Œ∫Œ±Œπ œÑŒ∑ŒΩ Œ±ŒπœÉŒ∏Œ∑œÑŒπŒ∫ŒÆ œÑœâŒΩ ŒøŒΩŒµŒØœÅœâŒΩ œÉŒ±œÇ œÉœÑŒø œÉœÄŒØœÑŒπ œÉŒ±œÇ.",
                    footer_links_title: "ŒìœÅŒÆŒ≥ŒøœÅŒøŒπ Œ£œçŒΩŒ¥ŒµœÉŒºŒøŒπ", footer_link_about: "Œ£œáŒµœÑŒπŒ∫Œ¨ ŒºŒµ ŒµŒºŒ¨œÇ", footer_link_contact: "ŒïœÄŒπŒ∫ŒøŒπŒΩœâŒΩŒØŒ±", footer_link_privacy: "Œ†ŒøŒªŒπœÑŒπŒ∫ŒÆ ŒëœÄŒøœÅœÅŒÆœÑŒøœÖ",
                    footer_social_title: "ŒëŒ∫ŒøŒªŒøœÖŒ∏ŒÆœÉœÑŒµ ŒºŒ±œÇ", footer_rights: "ŒúŒµ ŒµœÄŒπœÜœçŒªŒ±ŒæŒ∑ œÄŒ±ŒΩœÑœåœÇ Œ¥ŒπŒ∫Œ±ŒπœéŒºŒ±œÑŒøœÇ."
                },
                ru: {
                    nav_koltuklar: "–î–∏–≤–∞–Ω—ã", nav_puflar: "–ü—É—Ñ—ã", nav_berjerler: "–ö—Ä–µ—Å–ª–∞", nav_kose_takimlari: "–£–≥–ª–æ–≤—ã–µ –¥–∏–≤–∞–Ω—ã", nav_aksesuarlar: "–ê–∫—Å–µ—Å—Å—É–∞—Ä—ã",
                    product_name_relax: "–î–∏–≤–∞–Ω Pufemo Relax",
                    product_long_desc_relax: "–°–æ–∑–¥–∞–Ω–Ω—ã–π –¥–ª—è —Å–Ω—è—Ç–∏—è —É—Å—Ç–∞–ª–æ—Å—Ç–∏ –¥–Ω—è, –¥–∏–≤–∞–Ω Pufemo Relax –¥–æ–±–∞–≤–∏—Ç —Ü–µ–Ω–Ω–æ—Å—Ç–∏ –≤–∞—à–∏–º –∂–∏–ª—ã–º –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞–º.",
                    variant_color: "–¶–≤–µ—Ç", variant_size: "–†–∞–∑–º–µ—Ä", variant_fabric: "–¢–∫–∞–Ω—å",
                    color_grey: "–°–µ—Ä—ã–π", color_mustard: "–ì–æ—Ä—á–∏—á–Ω—ã–π", color_cream: "–ö—Ä–µ–º–æ–≤—ã–π",
                    fabric_velvet: "–ë–∞—Ä—Ö–∞—Ç", fabric_linen: "–õ–µ–Ω",
                    add_to_cart: "–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É",
                    footer_about: "–ú—ã –ø—Ä–∏–Ω–æ—Å–∏–º –∫–æ–º—Ñ–æ—Ä—Ç –∏ —ç—Å—Ç–µ—Ç–∏–∫—É –≤–∞—à–µ–π –º–µ—á—Ç—ã –≤ –≤–∞—à –¥–æ–º.",
                    footer_links_title: "–ë—ã—Å—Ç—Ä—ã–µ —Å—Å—ã–ª–∫–∏", footer_link_about: "–û –Ω–∞—Å", footer_link_contact: "–ö–æ–Ω—Ç–∞–∫—Ç—ã", footer_link_privacy: "–ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏",
                    footer_social_title: "–°–ª–µ–¥–∏—Ç–µ –∑–∞ –Ω–∞–º–∏", footer_rights: "–í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã."
                }
            };
            
            const exchangeRates = { TRY: 1, USD: 0.030, EUR: 0.028, GBP: 0.024 };
            const currencySymbols = { TRY: '‚Ç∫', USD: '$', EUR: '‚Ç¨', GBP: '¬£' };

            // --- SELECTORS ---
            const languageSelector = document.getElementById('language-selector');
            const currencySelector = document.getElementById('currency-selector');
            const mainImage = document.getElementById('main-product-image');
            const thumbnailList = document.getElementById('thumbnail-list');
            const colorOptionsContainer = document.getElementById('color-options');

            // --- FUNCTIONS ---
            function updateLanguage(lang) {
                const langData = translations[lang];
                if (!langData) return;

                document.querySelectorAll('[data-lang-key]').forEach(el => {
                    const key = el.dataset.langKey;
                    if (langData[key]) el.textContent = langData[key];
                });
                document.documentElement.lang = lang;
            }

            function updateCurrency(currency) {
                const rate = exchangeRates[currency];
                const symbol = currencySymbols[currency];
                const convertedPrice = productData.basePrice * rate;
                let formattedPrice;
                if (currency === 'TRY') {
                    formattedPrice = `${new Intl.NumberFormat('tr-TR').format(convertedPrice.toFixed(0))} ${symbol}`;
                } else {
                    formattedPrice = `${symbol} ${new Intl.NumberFormat('en-US').format(convertedPrice.toFixed(2))}`;
                }
                document.getElementById('product-price').textContent = formattedPrice;
            }

            function updateGallery(selectedColor) {
                const variant = productData.variants.find(v => v.color === selectedColor);
                if (!variant) return;

                mainImage.src = variant.images[0];
                mainImage.alt = `Pufemo Relax Koltuk - ${selectedColor}`;
                
                thumbnailList.innerHTML = ''; // Clear existing thumbnails
                variant.images.forEach((imgSrc, index) => {
                    const img = document.createElement('img');
                    img.src = imgSrc;
                    img.alt = `Thumbnail ${selectedColor} ${index + 1}`;
                    img.dataset.fullSrc = imgSrc; // Store image source in dataset

                    if (index === 0) {
                        img.classList.add('active');
                    }
                    
                    img.addEventListener('click', (e) => {
                        mainImage.src = e.currentTarget.dataset.fullSrc;
                        document.querySelectorAll('#thumbnail-list img').forEach(t => t.classList.remove('active'));
                        e.currentTarget.classList.add('active');
                    });
                    thumbnailList.appendChild(img);
                });
            }

            function initializeColorOptions() {
                colorOptionsContainer.innerHTML = ''; // Clear previous buttons
                productData.variants.forEach((variant, index) => {
                    const button = document.createElement('button');
                    button.classList.add('variant-btn');
                    button.dataset.langKey = variant.colorKey;
                    button.dataset.color = variant.color;
                    
                    if (index === 0) {
                        button.classList.add('active');
                    }

                    button.addEventListener('click', (e) => {
                        document.querySelectorAll('#color-options .variant-btn').forEach(btn => btn.classList.remove('active'));
                        e.currentTarget.classList.add('active');
                        updateGallery(e.currentTarget.dataset.color); // Get color from dataset
                    });

                    colorOptionsContainer.appendChild(button);
                });
            }

            function handleVariantSelection(options) {
                options.forEach(option => {
                    option.addEventListener('click', () => {
                        options.forEach(opt => opt.classList.remove('active'));
                        option.classList.add('active');
                    });
                });
            }
            
            // --- EVENT LISTENERS & INITIALIZATION ---
            languageSelector.addEventListener('change', (e) => updateLanguage(e.target.value));
            currencySelector.addEventListener('change', (e) => updateCurrency(e.target.value));

            handleVariantSelection(document.querySelectorAll('#size-options .variant-btn'));
            handleVariantSelection(document.querySelectorAll('#fabric-options .variant-btn'));
            
            // Initial Page Setup
            initializeColorOptions();
            updateGallery(productData.variants[0].color); // Load gallery for the first color
            updateLanguage(languageSelector.value);
            updateCurrency(currencySelector.value);
        });
    </script>
</body>
</html>
